machine:
  node:
    version: 5.7.0


test:

  pre:
    - node_modules/o-tools-livescript/bin/build
    - mkdir -p $CIRCLE_TEST_REPORTS/cucumber

  override:
    - node_modules/o-tools/bin/lint
    - cucumber-js --format json:$CIRCLE_TEST_REPORTS/cucumber/tests.cucumber


deployment:
  publish:
    tag: /v[0-9]+(\.[0-9]+)*/
    commands:
      - npm set //registry.npmjs.org/:_authToken $AUTH_TOKEN
      - npm publish
